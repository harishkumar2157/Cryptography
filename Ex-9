#include <stdio.h>
#include <string.h>
#include <ctype.h>

char matrix[5][5] = {
    {'P','L','A','Y','F'},
    {'I','R','E','X','M'},
    {'B','C','D','G','H'},
    {'K','N','O','Q','S'},
    {'T','U','V','W','Z'}
};

void find(char ch,int *r,int *c){
    if(ch=='J') ch='I';
    for(int i=0;i<5;i++)
        for(int j=0;j<5;j++)
            if(matrix[i][j]==ch){*r=i;*c=j;}
}

int main(){
    char text[]="KXJEYUREBEZWEHEWRYTUHEYFSKREHEGOYFIWTTTUOLKSYCAJPOBOTEIZONTXBYBNTGONEYCUZWRGDSONSXBOUYWRHEBAAHYUSEDQ";
    printf("Decrypted:\n");
    for(int i=0;text[i];i+=2){
        int r1,c1,r2,c2;
        find(text[i],&r1,&c1);
        find(text[i+1],&r2,&c2);

        if(r1==r2)
            printf("%c%c",matrix[r1][(c1+4)%5],matrix[r2][(c2+4)%5]);
        else if(c1==c2)
            printf("%c%c",matrix[(r1+4)%5][c1],matrix[(r2+4)%5][c2]);
        else
            printf("%c%c",matrix[r1][c2],matrix[r2][c1]);
    }
}
